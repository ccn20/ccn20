<!DOCTYPE html>
<html>
  <head>
    <title>InAppBrowser.addEventListener Example</title>

    <script type="text/javascript" src="cordova.js"></script>
    <script>

	document.addEventListener("deviceready", onDeviceReady, false);

    // device APIs are available
    //
    function onDeviceReady() {
	
        var ref = window.open('http://www.wificomo.com/twitter/twitterConnect.php', '_blank', 'location=yes');
		
		ref.addEventListener('loadstart', function(event) {
        closeFoursquare(event.url,ref);
		});  
    
	}
	
function closeFoursquare(loc,ref) {
   
   if (loc.indexOf("www.wificomo.com/twitter/twitterTokens.php?") > -1){
   alert(loc);
   var tokenTwitter = loc.substring(loc.indexOf("oauth_token=")+12, loc.indexOf("&"));
   var verifierTwitter = loc.substring(loc.indexOf("oauth_verifier=")+15, loc.indexOf("&"));
   var twitterName = loc.substring(loc.indexOf("twitterName=")+12);
   alert(tokenTwitter);
   alert(verifierTwitter);
   alert(twitterName);
   
   ref.close();
   }
}

    </script>
  </head>
  <body>
  </body>
</html>